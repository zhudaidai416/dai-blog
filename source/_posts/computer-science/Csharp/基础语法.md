---
title: 基础语法
date: 2024-09-25 01:42:03
category:
  - [计算机与科学, C#]
tags: C#
cover: https://img1.baidu.com/it/u=1443355191,438342065&fm=253&fmt=auto&app=138&f=JPEG?w=800&h=500
---

# 数据类型

- 值类型：简单类型（如 int、float、bool 和 char）、枚举类型、结构类型、Nullable 值类型
- 引用类型：类类型、接口类型、数组类型、委托类型

![数据类型](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fefbc908dfcb4436bcda4911220528f4~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp)

| 描述                  | 类型                                                         |
| --------------------- | ------------------------------------------------------------ |
| Unicode 字符（16 位） | char                                                         |
| 布尔值                | bool                                                         |
| 有符号整数            | sbyte（8 位）< short（16 位）< int（32 位）< long（64 位）   |
| 正整数                | byte（8 位）< ushort（16 位）< uint（32 位）< ulong（64 位） |
| 浮点数                | float（32 位）< double（64 位）                              |
| 时间                  | DateTime                                                     |

可空类型：声明时加个 `?`，才可赋值为 null

## 值类型

## 引用类型

### 对象类型 Object

```csharp
Object obj;
obj = 100; // 装箱
```

### 动态类型 Dynamic

可以存储任何类型的值在动态数据类型变量中

```csharp
dynamic d = 20;
```

### 字符串类型 String

字符串（String）类型是 System.String 类的别名

通过两种形式进行分配：`引号 和 @引号`

```csharp
String str = "zhudaidai";

// @（称作"逐字字符串"）将转义字符（\）当作普通字符对待，若要显示"，则要打多个"
string str = @"C:\Windows"""; // 输出 C:\Windows"
等同于
string str = "C:\\Windows"; // 输出 C:\Windows

// @内可以任意换行：换行符及缩进空格都计算在字符串长度之内
string str = @"<script type=""text/javascript"">
  <!--
  -->
</script>";
```

## 指针类型

# 运算符

## 算术运算符

假设 `A=10 B=20`

| 运算符 | 描述                             | 实例              |
| :----- | :------------------------------- | :---------------- |
| +      | 把两个操作数相加                 | A + B 将得到 30   |
| -      | 从第一个操作数中减去第二个操作数 | A - B 将得到 -10  |
| \*     | 把两个操作数相乘                 | A \* B 将得到 200 |
| /      | 分子除以分母                     | B / A 将得到 2    |
| %      | 取模运算符，整除后的余数         | B % A 将得到 0    |
| ++     | 自增运算符，整数值增加 1         | A++ 将得到 11     |
| --     | 自减运算符，整数值减少 1         | A-- 将得到 9      |

## 关系运算符

假设 `A=10 B=20`

| 运算符 | 描述                                                         | 实例            |
| :----- | :----------------------------------------------------------- | :-------------- |
| ==     | 检查两个操作数的值是否相等，如果相等则条件为真               | (A == B) 不为真 |
| !=     | 检查两个操作数的值是否相等，如果不相等则条件为真             | (A != B) 为真   |
| >      | 检查左操作数的值是否大于右操作数的值，如果是则条件为真       | (A > B) 不为真  |
| <      | 检查左操作数的值是否小于右操作数的值，如果是则条件为真       | (A < B) 为真    |
| >=     | 检查左操作数的值是否大于或等于右操作数的值，如果是则条件为真 | (A >= B) 不为真 |
| <=     | 检查左操作数的值是否小于或等于右操作数的值，如果是则条件为真 | (A <= B) 为真   |

## 逻辑运算符

假设 `A=true B=false`

| 运算符 | 描述                                                                         | 实例            |
| :----- | :--------------------------------------------------------------------------- | :-------------- |
| &&     | 逻辑与运算符。如果两个操作数都非零，则条件为真                               | (A && B) 为假   |
| \|\|   | 逻辑或运算符。如果两个操作数中有任意一个非零，则条件为真                     | (A \|\| B) 为真 |
| !      | 逻辑非运算符。用来逆转操作数的逻辑状态。如果条件为真则逻辑非运算符将使其为假 |                 |

## 合并运算符

合并运算符 `??`：如果第一个操作数的值为 null，则运算符返回第二个操作数的值，否则返回第一个操作数的值

```csharp
int? num1 = null;
int num2 = num1 ?? 123;

// 可以理解为三元运算符的简化形式
int num2 = (num1 == null) ? 123 : num1;
```

## 位运算符

位运算符作用于位，并逐位执行操作。&、 | 和 ^ 的真值表如下所示：

| p   | q   | p & q | p \| q | p ^ q |
| :-- | :-- | :---- | :----- | :---- |
| 0   | 0   | 0     | 0      | 0     |
| 0   | 1   | 0     | 1      | 1     |
| 1   | 1   | 1     | 1      | 0     |
| 1   | 0   | 0     | 1      | 1     |

假设 `A=60 B=13`

| 运算符 | 描述                                                                                   | 实例                                                           |
| :----- | :------------------------------------------------------------------------------------- | :------------------------------------------------------------- |
| &      | 如果同时存在于两个操作数中，二进制 AND 运算符复制一位到结果中                          | (A & B) 将得到 12，即为 0000 1100                              |
| \|     | 如果存在于任一操作数中，二进制 OR 运算符复制一位到结果中                               | (A \| B) 将得到 61，即为 0011 1101                             |
| ^      | 如果存在于其中一个操作数中但不同时存在于两个操作数中，二进制异或运算符复制一位到结果中 | (A ^ B) 将得到 49，即为 0011 0001                              |
| ~      | 按位取反运算符是一元运算符，具有"翻转"位效果，即 0 变成 1，1 变成 0，包括符号位        | (~A ) 将得到 -61，即为 1100 0011，一个有符号二进制数的补码形式 |
| <<     | 二进制左移运算符。左操作数的值向左移动右操作数指定的位数                               | A << 2 将得到 240，即为 1111 0000                              |
| >>     | 二进制右移运算符。左操作数的值向右移动右操作数指定的位数                               | A >> 2 将得到 15，即为 0000 1111                               |

+++success 案例

```csharp
int a = 60; // 60 = 0011 1100
int b = 13; // 13 = 0000 1101
int c = 0;

c = a & b; // 12 = 0000 1100
Console.WriteLine("Line 1 - c 的值是 {0}", c);

c = a | b; // 61 = 0011 1101
Console.WriteLine("Line 2 - c 的值是 {0}", c);

c = a ^ b; // 49 = 0011 0001
Console.WriteLine("Line 3 - c 的值是 {0}", c);

c = ~a; // -61 = 1100 0011
Console.WriteLine("Line 4 - c 的值是 {0}", c);

c = a << 2; // 240 = 1111 0000
Console.WriteLine("Line 5 - c 的值是 {0}", c);

c = a >> 2; // 15 = 0000 1111
Console.WriteLine("Line 6 - c 的值是 {0}", c);
Console.ReadLine();
```

+++

## 赋值运算符

| 运算符 | 描述                                                             | 实例                            |
| :----- | :--------------------------------------------------------------- | :------------------------------ |
| =      | 简单的赋值运算符，把右边操作数的值赋给左边操作数                 | C = A + B 将把 A + B 的值赋给 C |
| +=     | 加且赋值运算符，把右边操作数加上左边操作数的结果赋值给左边操作数 | C += A 相当于 C = C + A         |
| -=     | 减且赋值运算符，把左边操作数减去右边操作数的结果赋值给左边操作数 | C -= A 相当于 C = C - A         |
| \*=    | 乘且赋值运算符，把右边操作数乘以左边操作数的结果赋值给左边操作数 | C _= A 相当于 C = C_ A          |
| /=     | 除且赋值运算符，把左边操作数除以右边操作数的结果赋值给左边操作数 | C /= A 相当于 C = C / A         |
| %=     | 求模且赋值运算符，求两个操作数的模赋值给左边操作数               | C %= A 相当于 C = C % A         |
| <<=    | 左移且赋值运算符                                                 | C <<= 2 等同于 C = C << 2       |
| >>=    | 右移且赋值运算符                                                 | C >>= 2 等同于 C = C >> 2       |
| &=     | 按位与且赋值运算符                                               | C &= 2 等同于 C = C & 2         |
| ^=     | 按位异或且赋值运算符                                             | C ^= 2 等同于 C = C ^ 2         |
| \|=    | 按位或且赋值运算符                                               | C \|= 2 等同于 C = C \| 2       |

## 其他运算符

| 运算符   | 描述                                 | 实例                                                                              |
| :------- | :----------------------------------- | :-------------------------------------------------------------------------------- |
| sizeof() | 返回数据类型的大小                   | sizeof(int)，将返回 4                                                             |
| typeof() | 返回 class 的类型                    | typeof(StreamReader);                                                             |
| &        | 返回变量的地址                       | &a; 将得到变量的实际地址。                                                        |
| \*       | 变量的指针                           | \*a; 将指向一个变量。                                                             |
| ? :      | 条件表达式                           | 如果条件为真 ? 则为 X : 否则为 Y                                                  |
| is       | 判断对象是否为某一类型               | If( Ford is Car) // 检查 Ford 是否是 Car 类的一个对象。                           |
| as       | 强制转换，即使转换失败也不会抛出异常 | Object obj = new StringReader("Hello"); <br>StringReader r = obj as StringReader; |

+++success 案例

```csharp
Console.WriteLine("int 的大小是 {0}", sizeof(int)); // int的大小是4
Console.WriteLine("short 的大小是 {0}", sizeof(short)); // short的大小是2

Type type = typeof(string);
Console.WriteLine(type.FullName); // System.String
Console.ReadKey();
```

+++

## 运算符优先级

| 类别       | 运算符                              | 结合性   |
| :--------- | :---------------------------------- | :------- |
| 后缀       | () [] -> . ++ - -                   | 从左到右 |
| 一元       | + - ! ~ ++ - - (type)\* & sizeof    | 从右到左 |
| 乘除       | \* / %                              | 从左到右 |
| 加减       | + -                                 | 从左到右 |
| 移位       | << >>                               | 从左到右 |
| 关系       | < <= > >=                           | 从左到右 |
| 相等       | == !=                               | 从左到右 |
| 位与 AND   | &                                   | 从左到右 |
| 位异或 XOR | ^                                   | 从左到右 |
| 位或 OR    | \|                                  | 从左到右 |
| 逻辑与 AND | &&                                  | 从左到右 |
| 逻辑或 OR  | \|\|                                | 从左到右 |
| 条件       | ?:                                  | 从右到左 |
| 赋值       | = += -= \*= /= %= >>= <<= &= ^= \|= | 从右到左 |
| 逗号       | ,                                   | 从左到右 |

# 判断

## if

```csharp
if (条件)
{
  ...
}
else if ()
{
  ...
}
else
{

}
```

## switch

```csharp
switch (值)
{
  case 1:
    ...
    break;
  case 2:
    ...
    break;
  default:
    ...
    break;
}
```

## 三元运算符

```csharp
Exp1 ? Exp2 : Exp3;
```

# 循环

| 循环类型         | 描述                                                               |
| ---------------- | ------------------------------------------------------------------ |
| while 循环       | 当给定条件为真时，重复语句或语句组。它会在执行循环主体之前测试条件 |
| for/foreach 循环 | 多次执行一个语句序列，简化管理循环变量的代码                       |
| do...while 循环  | 除了它是在循环主体结尾测试条件外，其他与 while 语句类似            |
| 嵌套循环         | 可以在 while、for 或 do..while 循环内使用一个或多个循环            |

## 循环控制语句

| 控制语句      | 描述                                                                         |
| ------------- | ---------------------------------------------------------------------------- |
| break 语句    | 终止 loop 或 switch 语句，程序流将继续执行紧接着 loop 或 switch 的下一条语句 |
| continue 语句 | 引起循环跳过主体的剩余部分，立即重新开始测试条件                             |

# 方法（函数）

```csharp
<Access Specifier> <Return Type> <Method Name>(Parameter List)
{
  Method Body
}

➡ Access Specifier：访问修饰符
➡ Return type：返回类型，一个方法可以返回一个值。
➡ Method name：方法名称，是一个唯一的标识符，且是大小写敏感的。它不能与类中声明的其他标识符相同。
➡ Parameter list：参数列表
➡ Method body：方法主体
```
