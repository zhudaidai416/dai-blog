---
title: åŸºç¡€è¯­æ³•1
date: 2024-09-25 01:42:03
category:
  - [è®¡ç®—æœºä¸ç§‘å­¦, C#]
tags: C#
cover: https://daiblog.oss-cn-chengdu.aliyuncs.com/cover/2-2.jpg
---

# æœ¬æ–‡å‚è€ƒ

{% links %}

- site: C#è¯­è¨€å…¥é—¨è¯¦è§£
  owner: B ç«™è§†é¢‘
  url: https://www.bilibili.com/video/BV13b411b7Ht
  desc: C#è¯­è¨€å…¥é—¨è¯¦è§£ â€”â€” åˆ˜é“çŒ›
  color: "#e9546b"
- site: æœˆæ±Ÿæµè¯­é›€ç¬”è®°
  owner: æœˆæ±Ÿæµ
  url: https://www.yuque.com/yuejiangliu/dotnet/timothy-csharp-001
  desc: C# åˆ˜é“çŒ›ç¬”è®°
  color: "#e9546b"

{% endlinks %}

# ç±»ä¸åç§°ç©ºé—´

- ç±» `class`ï¼šæ„æˆç¨‹åºçš„ä¸»ä½“
- åç§°ç©ºé—´ `namespace`ï¼šä»¥æ ‘å‹ç»“æ„ç»„ç»‡ç±»ï¼ˆå’Œå…¶ä»–ç±»å‹ï¼‰

```csharp
using System; // å¼•å…¥å‘½åç©ºé—´

namespace HelloWorld // å‘½åç©ºé—´
{
  class Program // ç±»åä¸æ–‡ä»¶åä¿æŒä¸€è‡´
  {
    static void Main(string[] args)
    {
      Console.WriteLine("hello!");
    }
  }
}
```

**MSDN æ–‡æ¡£ï¼ˆå³æ·»åŠ  HelpViewerï¼‰**ï¼š`å¼€å§‹èœå•æ‰“å¼€ Visual Studio Installer â¡ ä¿®æ”¹ â¡ å•ä¸ªç»„ä»¶ â¡ æœç´¢ HelpViewer`

## ç±»åº“çš„å¼•ç”¨

ä½¿ç”¨åç§°ç©ºé—´çš„ç‰©ç†åŸºç¡€

ä¸åŒæŠ€æœ¯ç±»å‹çš„é¡¹ç›®ä¼šé»˜è®¤å¼•ç”¨ä¸åŒçš„ç±»åº“

### DLL å¼•ç”¨ï¼ˆé»‘ç›’å¼•ç”¨ï¼Œæ— æºä»£ç ï¼‰

- `å¼•ç”¨ â¡ å³é”®æ·»åŠ å¼•ç”¨ â¡ æµè§ˆ â¡ æ‰‹åŠ¨æ·»åŠ .dllæ–‡ä»¶`
- `å¼•ç”¨ â¡ å³é”®æ·»åŠ å¼•ç”¨ â¡ ç¨‹åºé›† â¡ æœç´¢æ·»åŠ `

+++success æ¡ˆä¾‹ï¼šå¼•ç”¨ System.Windows.Forms æ¥å®ç°çª—ä½“

```csharp
using System.Windows.Forms;

namespace HelloWorld
{
  class Program
  {
    static void Main(string[] args)
    {
      Form form = new Form();
      form.ShowDialog();
    }
  }
}
```

+++

#### [NuGet](https://www.nuget.org/) ç®€ä»‹

`å¼•ç”¨ â¡ å³é”®ç®¡ç† NuGet ç¨‹åºåŒ… â¡ æµè§ˆä¸‹æœç´¢ EntityFramework å®‰è£…`

### é¡¹ç›®å¼•ç”¨ï¼ˆç™½ç›’å¼•ç”¨ï¼Œæœ‰æºä»£ç ï¼‰

`å¼•ç”¨ â¡ å³é”®æ·»åŠ å¼•ç”¨ â¡ é¡¹ç›®ï¼ˆè§£å†³æ–¹æ¡ˆå³é”®æ·»åŠ ç°æœ‰é¡¹ï¼‰â¡ é€‰æ‹©æ·»åŠ `

ä¸€ä¸ªé¡¹ç›®å¯ä»¥åº”ç”¨åœ¨å¤šä¸ªè§£å†³æ–¹æ¡ˆä¸Š

**è‡ªå·±å»ºç±»åº“**ï¼š`å·¦ä¸Šè§’æ–‡ä»¶ â¡ æ–°å»º â¡ é¡¹ç›® â¡ æœç´¢æ æœç±»åº“æ¨¡æ¿`

## ä¾èµ–å…³ç³»

- ç±»ï¼ˆæˆ–å¯¹è±¡ï¼‰ä¹‹é—´çš„è€¦åˆå…³ç³»

- ä¼˜ç§€çš„ç¨‹åºè¿½æ±‚â€é«˜å†…èšï¼Œä½è€¦åˆâ€œ

  æ•™å­¦ç¨‹åºå¾€å¾€ä¼šè¿åè¿™ä¸ªåŸåˆ™

- UMLï¼ˆé€šç”¨å»ºæ¨¡è¯­è¨€ï¼‰ç±»å›¾

  ![img](https://daiblog.oss-cn-chengdu.aliyuncs.com/csharp/UMLç±»å›¾.png)

## æ’é™¤é”™è¯¯

- ä»”ç»†é˜…è¯»ç¼–è¯‘å™¨çš„æŠ¥é”™
- MSDN æ–‡æ¡£ä¸æœç´¢å¼•æ“ç»“åˆ

# ç±»ã€å¯¹è±¡ã€ç±»æˆå‘˜

## å®šä¹‰

ç±»æ˜¯ç°å®ä¸–ç•Œäº‹ç‰©çš„æ¨¡å‹

ç±»æ˜¯å¯¹ç°å®ä¸–ç•Œäº‹ç‰©è¿›è¡ŒæŠ½è±¡æ‰€å¾—åˆ°çš„ç»“æœ

- äº‹ç‰©åŒ…æ‹¬â€œç‰©è´¨â€ï¼ˆå®ä½“ï¼‰ä¸â€œè¿åŠ¨â€ï¼ˆé€»è¾‘ï¼‰

- å»ºæ¨¡æ˜¯ä¸€ä¸ªå»ä¼ªå­˜çœŸã€ç”±è¡¨åŠé‡Œçš„è¿‡ç¨‹

## ä¸å¯¹è±¡çš„å…³ç³»

- å¯¹è±¡ä¹Ÿå«å®ä¾‹ï¼Œæ˜¯ç±»ç»è¿‡â€œå®ä¾‹åŒ–â€åå¾—åˆ°çš„å†…å­˜ä¸­çš„å®ä½“
- ä¾ç…§ç±»ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå¯¹è±¡ï¼Œè¿™å°±æ˜¯â€œå®ä¾‹åŒ–â€
- ä½¿ç”¨ `new` æ“ä½œç¬¦åˆ›å»ºç±»çš„å®ä¾‹

- å¼•ç”¨å˜é‡ä¸å®ä¾‹çš„å…³ç³»

  ```csharp
  (new Form()).Text = "My Form";
  (new Form()).ShowDialog(); // å¦ä¸€ä¸ªå®ä¾‹
  
  // å¼•ç”¨å˜é‡
  Form myForm = new Form();
  myForm.Text = "My Form";
  myForm.ShowDialog();
  ```

## ç±»çš„ä¸‰å¤§æˆå‘˜

- å±æ€§ï¼ˆPropertyï¼‰

  - å­˜å‚¨æ•°æ®ï¼Œç»„åˆèµ·æ¥è¡¨ç¤ºç±»æˆ–å¯¹è±¡å½“å‰çš„çŠ¶æ€

- æ–¹æ³•ï¼ˆMethodï¼‰

  - ç”± C è¯­è¨€ä¸­çš„å‡½æ•°ï¼ˆfunctionï¼‰è¿›åŒ–è€Œæ¥ï¼Œè¡¨ç¤ºç±»æˆ–å¯¹è±¡â€œèƒ½åšä»€ä¹ˆâ€

  - å·¥ä½œä¸­ 90% çš„æ—¶é—´æ˜¯ä¸æ–¹æ³•æ‰“äº¤é“ï¼Œå› ä¸ºå®ƒæ˜¯â€œçœŸæ­£åšäº‹â€ã€â€œæ„æˆé€»è¾‘â€çš„æˆå‘˜

- äº‹ä»¶ï¼ˆEventï¼‰

  - ç±»æˆ–å¯¹è±¡é€šçŸ¥å…¶å®ƒç±»æˆ–å¯¹è±¡çš„æœºåˆ¶ï¼Œä¸º C# æ‰€ç‰¹æœ‰ï¼ˆJava é€šè¿‡å…¶å®ƒåŠæ³•å®ç°è¿™ä¸ªæœºåˆ¶ï¼‰

- å–„ç”¨äº‹ä»¶æœºåˆ¶éå¸¸é‡è¦ï¼ˆåˆ‡å‹¿æ»¥ç”¨ï¼‰

ğŸ˜€

æŸäº›ç‰¹æ®Šç±»æˆ–å¯¹è±¡åœ¨æˆå‘˜æ–¹é¢ä¾§é‡ç‚¹ä¸åŒ

- æ¨¡å‹ç±»æˆ–å¯¹è±¡é‡åœ¨å±æ€§ï¼Œå¦‚ Entity Framework

- å·¥å…·ç±»æˆ–å¯¹è±¡é‡åœ¨æ–¹æ³•ï¼Œå¦‚ Mathï¼ŒConsole

- é€šçŸ¥ç±»æˆ–å¯¹è±¡é‡åœ¨äº‹ä»¶ï¼Œå¦‚å„ç§ Timer

+++success æ¡ˆä¾‹ï¼šä½¿ç”¨ wpf å®ç°æ¡Œé¢æ—¶é’Ÿï¼ˆä¾§é‡äº‹ä»¶ï¼‰

![img](https://daiblog.oss-cn-chengdu.aliyuncs.com/csharp/wpfå®ç°æ¡Œé¢æ—¶é’Ÿ.png)

```csharp
...
using System.Windows.Threading;

namespace EventSample
{
  public partial class MainWindow : Window
  {
    public MainWindow()
    {
      InitializeComponent();
      DispatcherTimer timer = new DispatcherTimer();
      timer.Interval = TimeSpan.FromSeconds(1);
      timer.Tick += Timer_Tick;
      timer.Start(); // æ—¶é’Ÿå¼€å§‹
    }

    private void Timer_Tick(object sender, EventArgs e)
    {
      this.timeTextBox.Text = DateTime.Now.ToString();
    }
  }
}
```

+++

## é™æ€æˆå‘˜ä¸å®ä¾‹æˆå‘˜

- é™æ€ï¼ˆStaticï¼‰æˆå‘˜ï¼šç±»çš„æˆå‘˜

  ç‰©ä½“å›ºæœ‰çš„æ€§è´¨ï¼Œéš¶å±äºæŸä¸ªç±»

- å®ä¾‹ï¼ˆéé™æ€ï¼‰æˆå‘˜ï¼šå¯¹è±¡çš„æˆå‘˜

  å®ä¾‹æˆå‘˜æ˜¯å±äºå¯¹è±¡çš„ï¼Œè€Œéç±»

- ç»‘å®šï¼ˆBindingï¼‰æŒ‡çš„æ˜¯ç¼–è¯‘å™¨å¦‚ä½•æŠŠä¸€ä¸ªæˆå‘˜ä¸ç±»æˆ–å¯¹è±¡å…³è”èµ·æ¥

  ä¸å¯å°è§‘çš„ `.` æ“ä½œç¬¦ â€”â€” æˆå‘˜è®¿é—®

```csharp
using System.Windows.Forms;

namespace Test
{
  class Program
  {
    static void Main(string[] args)
    {
      Console.WriteLine("é™æ€æ–¹æ³•");
      Form form = new Form();
      form.Text = "å®ä¾‹å±æ€§";
      form.ShowDialog();
    }
  }
}
```

> ğŸš© MSDN æ–‡æ¡£ä¸­æ ‡æœ‰ `çº¢è‰²S` ä¸ºé™æ€æˆå‘˜

# åŸºæœ¬å…ƒç´ 

æ„æˆ C# è¯­è¨€çš„åŸºæœ¬å…ƒç´ 

- å…³é”®å­—ï¼ˆKeywordï¼‰

  MSDN æ–‡æ¡£ä½ç½®ï¼š`Visual Basic å’Œ Visual C# â¡ C#å‚è€ƒ â¡ C#å…³é”®å­—`

- æ“ä½œç¬¦/è¿ç®—ç¬¦ï¼ˆOperatorï¼‰

  MSDN æ–‡æ¡£ä½ç½®ï¼š`Visual Basic å’Œ Visual C# â¡ C#å‚è€ƒ â¡ C#è¿ç®—ç¬¦`

- æ ‡è¯†ç¬¦ï¼ˆIdentifierï¼‰

- æ ‡ç‚¹ç¬¦å·

- æ–‡æœ¬ï¼ˆå­—é¢å€¼ï¼‰

- æ³¨é‡Šä¸ç©ºç™½

å‰äº”ç§ç§°ä¸ºæ ‡è®°ï¼ˆtokenï¼‰

## åˆæ³•æ ‡è¯†ç¬¦

- æ ‡è¯†ç¬¦ä¸å…è®¸æ˜¯å…³é”®å­—ï¼Œå¦‚æœéè¦ç”¨å…³é”®å­—å°±åœ¨å‰é¢åŠ  `@` ç¬¦å·

- æ ‡è¯†ç¬¦å¿…éœ€ä»¥å­—ç¬¦æˆ–ä¸‹åˆ’çº¿å¼€å¤´

  å­—ç¬¦åŒ…æ‹¬è‹±æ–‡å­—ç¬¦ï¼Œä¹ŸåŒ…æ‹¬æ±‰è¯­ã€ä¿„è¯­ç­‰å­—ç¬¦

- å¼€å§‹å­—ç¬¦çš„åé¢å¯ä»¥è·Ÿå­—ç¬¦ã€æ•°å­—ã€ä¸‹åˆ’çº¿

## å‘½åè§„èŒƒ

- å˜é‡å â€”â€” é©¼å³°å‘½åæ³• Camel

  é¦–å­—æ¯å°å†™ï¼Œåç»­å•è¯é¦–å­—æ¯å¤§å†™

- æ–¹æ³•ã€ç±»ã€åç§°ç©ºé—´ â€”â€” å¸•æ–¯å¡å‘½åæ³• Pascal

  æ¯ä¸ªå•è¯çš„é¦–å­—æ¯éƒ½å¤§å†™

æ–¹æ³•ååº”è¯¥æ˜¯åŠ¨è¯æˆ–åŠ¨è¯çŸ­è¯­

## å­—é¢å€¼

- æ•´æ•°

  ```csharp
  int x = 10;
  long y = 10L;
  ```

- å®æ•°ï¼ˆå°æ•°ï¼‰

  ```csharp
  float x = 3.0F;
  double y = 4.0;
  ```

- å­—ç¬¦

- å­—ç¬¦ä¸²

  ```csharp
  char c = 'a';
  string str = "abc";
  bool a = true;
  ```

- å¸ƒå°”

- ç©º null

## åˆè¯†ç±»å‹ã€å˜é‡ã€æ–¹æ³•

- åˆè¯†ç±»å‹ï¼ˆTypeï¼‰

  äº¦ç§°æ˜¯æ•°æ®ç±»å‹ï¼ˆData Typeï¼‰

- å˜é‡ï¼šå­˜æ”¾æ•°æ®çš„åœ°æ–¹ï¼Œç®€ç§°â€œæ•°æ®â€

  - å˜é‡çš„å£°æ˜
  - å˜é‡çš„ä½¿ç”¨

- æ–¹æ³•ï¼ˆæ—§ç§°å‡½æ•°ï¼‰ï¼šå¤„ç†æ•°æ®çš„é€»è¾‘ï¼Œåˆç§°â€œç®—æ³•â€

  - æ–¹æ³•çš„å£°æ˜
  - æ–¹æ³•çš„è°ƒç”¨

- ç¨‹åº = æ•°æ® + ç®—æ³•

  æœ‰äº†å˜é‡å’Œæ–¹æ³•å°±å¯ä»¥å†™æœ‰æ„ä¹‰çš„ç¨‹åºäº†

# ç±»å‹

Type åˆåæ•°æ®ç±»å‹ï¼ˆData Typeï¼‰

- å°å†…å­˜å®¹çº³å¤§å°ºå¯¸æ•°æ®ä¼šä¸¢å¤±ç²¾åº¦ã€å‘ç”Ÿé”™è¯¯
- å¤§å†…å­˜å®¹çº³å°å°ºå¯¸æ•°æ®ä¼šå¯¼è‡´æµªè´¹
- ç¼–ç¨‹è¯­è¨€çš„æ•°æ®ç±»å‹ä¸æ•°æ®çš„æ•°æ®ç±»å‹ä¸å®Œå…¨ç›¸åŒ

å¼ºç±»å‹è¯­è¨€ä¸å¼±ç±»å‹è¯­è¨€

- å¼ºç±»å‹ï¼šç¼–å†™ç¨‹åºæ—¶ï¼Œç¨‹åºä¸­çš„æ•°æ®å—åˆ°æ•°æ®ç±»å‹çš„çº¦æŸ

- å¼±ç±»å‹ï¼šæ•°æ®å—ç±»å‹çº¦æŸä¸ä¸¥æ ¼ï¼Œæˆ–åŸºæœ¬ä¸å—çº¦æŸï¼ˆå¦‚ JavaScript åŠ¨æ€ç±»å‹ï¼‰

- C# ä» 4.0 å¼€å§‹å¼•å…¥äº† Dynamicï¼Œè®©å®ƒå¯ä»¥åˆ©ç”¨åŠ¨æ€è¯­è¨€çš„ä¸€äº›ç‰¹æ€§ï¼Œä½† C# ä¾ç„¶æ˜¯å¼ºç±»å‹ç¼–ç¨‹è¯­è¨€

  ```csharp
  namespace DynamicSample
  {
    class Program
    {
      static void Main(string[] args)
     {
        dynamic myVar = 100;
        Console.WriteLine(myVar);
        myVar = "Mr.Okay!";
        Console.WriteLine(myVar);
      }
    }
  }
  ```

## ä½œç”¨

- å­˜å‚¨æ­¤ç±»å‹å˜é‡æ‰€éœ€çš„å†…å­˜ç©ºé—´å¤§å°
- æ­¤ç±»å‹çš„å€¼å¯è¡¨ç¤ºçš„æœ€å¤§ã€æœ€å°å€¼èŒƒå›´
- æ­¤ç±»å‹æ‰€åŒ…å«çš„æˆå‘˜ï¼ˆå¦‚æ–¹æ³•ã€å±æ€§ã€äº‹ä»¶ç­‰ï¼‰
- æ­¤ç±»å‹ç”±ä½•åŸºç±»æ´¾ç”Ÿè€Œæ¥
- ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œæ­¤ç±»å‹çš„å˜é‡è¢«åˆ†é…åœ¨å†…å­˜çš„ä»€ä¹ˆä½ç½®
  - Stack ç®€ä»‹ï¼ˆæ ˆï¼‰
  - Stack overflow æ ˆæº¢å‡º
  - Heap ç®€ä»‹ï¼ˆå †ï¼‰
  - ä½¿ç”¨ Performance Monitor æŸ¥çœ‹è¿›ç¨‹çš„å †å†…å­˜ä½¿ç”¨é‡
  - å…³äºå†…å­˜æ³„æ¼
- æ­¤ç±»å‹æ‰€å…è®¸çš„æ“ä½œï¼ˆè¿ç®—ï¼‰

å¯¹ä¸€ä¸ªç¨‹åºæ¥è¯´ï¼Œé™æ€æŒ‡ç¼–è¾‘æœŸã€ç¼–è¯‘æœŸï¼›åŠ¨æ€æŒ‡è¿è¡ŒæœŸ
é™æ€æ—¶è£…åœ¨ç¡¬ç›˜é‡Œï¼ŒåŠ¨æ€æ—¶è£…åœ¨å†…å­˜é‡Œ

## åå°„

é€šè¿‡åå°„åœ¨è¿è¡ŒæœŸè·å–ç±»çš„å±æ€§å’Œæ–¹æ³•

```csharp
static void Main(string[] args)
{
  Type myType = typeof(Form);
  Console.WriteLine(myType.BaseType.FullName + Environment.NewLine + myType.FullName);
  var pInfos = myType.GetProperties(); // è·å–å±æ€§
  foreach (var p in pInfos)
  {
    Console.WriteLine(p.Name);
  }
  var mInfos = myType.GetMethods(); // è·å–æ–¹æ³•
  foreach (var m in mInfos)
  {
    Console.WriteLine(m.Name);
  }
}
```

## Stack & Heap

Stack overflow æ ˆæº¢å‡º

- å‡½æ•°è°ƒç”¨è¿‡å¤šï¼ˆç®—æ³•é”™è¯¯ï¼‰
- åœ¨æ ˆä¸Šåˆ†é…äº†è¿‡å¤šå†…å­˜

+++success æ¡ˆä¾‹

```csharp
// è°ƒç”¨è¿‡å¤šï¼ˆå¦‚é€’å½’ï¼‰
static void Main(string[] args)
{
  BadGuy bg = new BadGuy();
  bg.BadMethod();
}
class BadGuy
{
  public void BadMethod()
  {
    int x = 100;
    this.BadMethod();
  }
}

// åœ¨æ ˆä¸Šåˆ†é…è¿‡å¤§å†…å­˜
static void Main(string[] args)
{
  unsafe
  {
    int* p = stackalloc int[9999999];
  }
}
```

+++

## ç±»å‹ç³»ç»Ÿâ€”â€”äº”å¤§æ•°æ®ç±»å‹

- ç±»ï¼ˆClassesï¼‰ï¼šå¦‚ Windowsã€Formsã€Consoleã€String
- ç»“æ„ä½“ï¼ˆStructuresï¼‰ï¼šå¦‚ Int32ã€Int64ã€Singleã€Double
- æšä¸¾ï¼ˆEnumerationsï¼‰ï¼šå¦‚ HorizontalAlignmentã€Visibility
- æ¥å£ï¼ˆInterfacesï¼‰
- å§”æ‰˜ï¼ˆDelegatesï¼‰

### ç±»

```csharp
type myType = typeof(Form);
Console.WriteLine(myType.FullName);
Console.WriteLine(myType.IsClass);
```

ğŸš© F12 è·³è½¬åˆ°æºä»£ç å®šä¹‰

### ç»“æ„ä½“

intã€long æ˜¯ç»“æ„ä½“ç±»å‹

### æšä¸¾

```csharp
using System.Windows.Forms;

namespace Test
{
  class Program
  {
    static void Main(string[] args)
    {
      Form f = new Form();
      f.WindowState = FormWindowState.Maximized; // æœ€å¤§åŒ–çš„çª—å£
      f.WindowState = FormWindowState.Normal; // é»˜è®¤å¤§å°çš„çª—å£
      f.WindowState = FormWindowState.Minimized; // æœ€å°åŒ–çš„çª—å£
      f.ShowDialog();
    }
  }
}
```

## æ´¾ç”Ÿè°±ç³»

![æ´¾ç”Ÿè°±ç³»](https://daiblog.oss-cn-chengdu.aliyuncs.com/csharp/æ´¾ç”Ÿè°±ç³».png)

# å˜é‡

## å®šä¹‰

è¡¨é¢ä¸Šçœ‹ï¼Œå˜é‡çš„ç”¨é€”æ˜¯å­˜å‚¨æ•°æ®

å®é™…ä¸Šï¼Œå˜é‡è¡¨ç¤ºäº†å­˜å‚¨ä½ç½®ï¼Œå¹¶ä¸”æ¯ä¸ªå˜é‡éƒ½æœ‰ä¸€ä¸ªç±»å‹ï¼Œä»¥å†³å®šä»€ä¹ˆæ ·çš„å€¼èƒ½å¤Ÿå­˜å…¥å˜é‡

- å˜é‡åè¡¨ç¤ºï¼ˆå¯¹åº”ç€ï¼‰å˜é‡çš„å€¼åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ä½ç½®
- è®¡ç®—æœºç³»ç»Ÿé€šè¿‡å˜é‡çš„ç±»å‹æ¥åˆ†é…ç»™å®ƒå¯¹åº”å¤§å°çš„å†…å­˜ç©ºé—´

å˜é‡ = ä»¥å˜é‡åæ‰€å¯¹åº”çš„å†…å­˜åœ°å€ä¸ºèµ·ç‚¹ï¼Œä»¥å…¶æ•°æ®ç±»å‹æ‰€è¦æ±‚çš„å­˜å‚¨ç©ºé—´ä¸ºé•¿åº¦çš„ä¸€å—å†…å­˜åŒºåŸŸ

ğŸ˜€

ç‹­ä¹‰çš„å˜é‡æŒ‡å±€éƒ¨å˜é‡ï¼Œå› ä¸ºå…¶å®ƒç§ç±»çš„å˜é‡éƒ½æœ‰è‡ªå·±çš„çº¦å®šåç§°

- ç®€å•åœ°è®²ï¼Œå±€éƒ¨å˜é‡å°±æ˜¯æ–¹æ³•ä½“ï¼ˆå‡½æ•°ä½“ï¼‰é‡Œå£°æ˜çš„å˜é‡

ğŸ˜€ **7 ç§å˜é‡ï¼š**

- é™æ€å˜é‡
- å®ä¾‹å˜é‡ï¼ˆæˆå‘˜å˜é‡ã€å­—æ®µï¼‰
- æ•°ç»„å…ƒç´ 
- å€¼å‚æ•°
- å¼•ç”¨å‚æ•°
- è¾“å‡ºå½¢å‚
- å±€éƒ¨å˜é‡

+++success æ¼”ç¤º

```csharp
class Program
{
  static void Main(string[] args)
  {
    Student.Amount = 100; // é™æ€æˆå‘˜å˜é‡
    Student stu = new Student();
    stu.Age = 18; // å®ä¾‹å˜é‡ï¼ˆå­—æ®µï¼šæ˜¯å±æ€§çš„é›å½¢ï¼Œå¯ä»¥èµ‹ä»»æ„å€¼ï¼‰

    // æ•°ç»„å…ƒç´ 
    int[] arr = new int[100]; // é•¿åº¦ä¸º100çš„æ•°ç»„
  }

  class Student
  {
    public static int Amout;
    public int Age;
    public string Name;
    // ref double aï¼šå¼•ç”¨å‚æ•°å˜é‡
    // out double aï¼šè¾“å‡ºå‚æ•°å˜é‡
    public double Add(double a, double b) // aã€bä¸ºå€¼å‚æ•°å˜é‡
    {
        double result = a + b; // å±€éƒ¨å˜é‡
        return result;
    }
  }
}
```

+++

å£°æ˜å˜é‡ï¼š`æœ‰æ•ˆçš„ä¿®é¥°ç¬¦ç»„åˆç±»å‹opt ç±»å‹ å˜é‡å åˆå§‹åŒ–å™¨opt`ï¼Œpotï¼šå¯æœ‰å¯æ— 

## å€¼ç±»å‹çš„å˜é‡

å€¼ç±»å‹æ²¡æœ‰å®ä¾‹ï¼Œæ‰€è°“çš„â€œå®ä¾‹â€ä¸å˜é‡åˆè€Œä¸ºä¸€

```csharp
byte b = 100;
sbyte sb = -100; // 100æŒ‰ä½å–å + 1

ushort us = 1000; // å 2ä¸ªå­—èŠ‚
short s = -1000;
string str = Convert.ToString(s, 2); // éªŒè¯
Console.WriteLine(str); // 1111110000011000
```

| å˜é‡       | å†…å­˜ç¼–å· | 7   | 6   | 5   | 4   | 3   | 2   | 1   | 0   |        |
| ---------- | -------- | --- | --- | --- | --- | --- | --- | --- | --- | ------ |
| bï¼ˆ100ï¼‰   | 10000000 | 0   | 1   | 1   | 0   | 0   | 1   | 0   | 0   |        |
| sbï¼ˆ-100ï¼‰ | 10000001 | 1   | 0   | 0   | 1   | 1   | 1   | 0   | 0   |        |
| usï¼ˆ1000ï¼‰ | 10000002 | `1` | 1   | 1   | 0   | 1   | 0   | 0   | 0   | ä½å…«ä½ |
|            | 10000003 | 0   | 0   | 0   | 0   | 0   | 0   | 1   | 1   | é«˜å…«ä½ |
| sï¼ˆ-1000ï¼‰ | 10000004 | 0   | 0   | 0   | 1   | 1   | 0   | 0   | 0   | ä½å…«ä½ |
|            | 10000005 | `1` | 1   | 1   | 1   | 1   | 1   | 0   | 0   | é«˜å…«ä½ |

## å¼•ç”¨ç±»å‹çš„å˜é‡ä¸å®ä¾‹

å…³ç³»ï¼šå¼•ç”¨ç±»å‹å˜é‡é‡Œå­˜å‚¨çš„æ•°æ®æ˜¯å¯¹è±¡çš„å†…å­˜åœ°å€

```csharp
class Program
{
  static void Main(string[] args)
  {
    Student stu;
  }
}

class Student
{
  uint ID;
  ushort Score;
}
```

è®¡ç®—æœºçœ‹åˆ°å¼•ç”¨ç±»å‹ï¼Œç›´æ¥ç»™å®ƒåˆ†é… 4 ä¸ªå­—èŠ‚ï¼Œè€Œä¸”å…¨éƒ¨ Bit ç½® 0ï¼Œå‘Šè¯‰ä½ è¿™ä¸ªå˜é‡æ²¡æœ‰å¼•ç”¨ä»»ä½•å®ä¾‹

![img](https://daiblog.oss-cn-chengdu.aliyuncs.com/csharp/å¼•ç”¨ç±»å‹1.png)

```csharp
Student stu;
stu = new Student();
```

ç°åœ¨å¼•ç”¨å˜é‡é‡Œé¢å­˜çš„æ˜¯å®ä¾‹çš„åœ°å€ã€‚ å›¾ä¸­å·¦ä¾§æ˜¯æ ˆï¼Œå³ä¾§æ˜¯å †

![img](https://daiblog.oss-cn-chengdu.aliyuncs.com/csharp/å¼•ç”¨ç±»å‹2.png)

```csharp
Student stu;
stu = new Student();
Student stu2;
stu2 = stu;
```

![img](https://daiblog.oss-cn-chengdu.aliyuncs.com/csharp/å¼•ç”¨ç±»å‹3.png)

å±€éƒ¨å˜é‡æ˜¯åœ¨ stackï¼ˆæ ˆï¼‰ä¸Šåˆ†é…å†…å­˜

## å˜é‡çš„é»˜è®¤å€¼

ä¸€æ—¦å˜é‡åœ¨å†…å­˜ä¸­åˆ†é…å¥½åï¼Œå®ƒçš„å†…å­˜å—å°±è¢«ç»Ÿç»Ÿåˆ·æˆ 0ï¼Œè¿™å°±æ˜¯å®ƒçš„é»˜è®¤å€¼

å±€éƒ¨å˜é‡æ²¡æœ‰é»˜è®¤å€¼ï¼Œå› ä¸º C# ä¸ºäº†é¿å…ä¸å®‰å…¨ä»£ç ï¼Œè¦æ±‚å±€éƒ¨å˜é‡å¿…éœ€æœ‰æ˜¾å¼èµ‹å€¼

## å¸¸é‡

å€¼ä¸å¯æ”¹å˜çš„å˜é‡

## è£…ç®±ä¸æ‹†ç®±

```csharp
int a = 100;
object x;
```

![img](https://daiblog.oss-cn-chengdu.aliyuncs.com/csharp/è£…ç®±1.png)

### è£…ç®±ï¼ˆæ ˆåˆ°å †ï¼‰

```csharp
int a = 100;
object x;
x = a;
```

![img](https://daiblog.oss-cn-chengdu.aliyuncs.com/csharp/è£…ç®±2.png)

### æ‹†ç®±ï¼ˆå †åˆ°æ ˆï¼‰

```csharp
int a = 100;
object x;
x = a;
int b = (int)x;
Console.WriteLine(b);
```

![img](https://daiblog.oss-cn-chengdu.aliyuncs.com/csharp/æ‹†ç®±.png)

# æ–¹æ³•

## ç”±æ¥

- æ–¹æ³•ï¼ˆmethodï¼‰çš„å‰èº«æ˜¯ C/C++ è¯­è¨€çš„å‡½æ•°ï¼ˆfunctionï¼‰

  - æ–¹æ³•æ˜¯é¢å‘å¯¹è±¡èŒƒç•´çš„æ¦‚å¿µï¼Œåœ¨éé¢å‘å¯¹è±¡è¯­è¨€ä¸­ä»ç„¶ç§°ä¸ºå‡½æ•°

  - ä½¿ç”¨ C/C++ è¯­è¨€åšå¯¹æ¯”

    +++success æ¼”ç¤º

    ```c
    // cè¯­è¨€
    #include <stdio.h>
  
    double Add(double a, double b)
    {
      return a + b;
    }
  
    int main()
    {
      double x = 3.0;
      double y = 5.0;
      double result = Add(x, y);
      printf("%f + %f = %f", x, y, reslut);
      return 0;
    }
    ```

    ```c++
    // c++
    #include <iostream>
  
    double Add(double a, double b)
    {
      return a + b;
    }
  
    int main()
    {
      double x = 3.0;
      double y = 5.0;
      double result = Add(x, y);
      std::cout << x << "+" << y << "=" << result;
      return 0;
    }
    ```

    +++

- æ–¹æ³•æ°¸è¿œéƒ½æ˜¯ç±»ï¼ˆæˆ–ç»“æ„ä½“ï¼‰çš„æˆå‘˜

  - C# è¯­è¨€ä¸­å‡½æ•°ä¸å¯èƒ½ç‹¬ç«‹äºç±»ï¼ˆæˆ–ç»“æ„ä½“ï¼‰ä¹‹å¤–
  - åªæœ‰ä½œä¸ºç±»ï¼ˆæˆ–ç»“æ„ä½“ï¼‰çš„æˆå‘˜æ—¶æ‰è¢«ç§°ä¸ºæ–¹æ³•
  - C++ ä¸­å‡½æ•°å¯ä»¥ç‹¬ç«‹äºç±»ä¹‹å¤–ï¼Œç§°ä¸ºâ€œå…¨å±€å‡½æ•°â€

- æ–¹æ³•æ˜¯ç±»ï¼ˆæˆ–ç»“æ„ä½“ï¼‰æœ€åŸºæœ¬çš„æˆå‘˜ä¹‹ä¸€

  - æœ€åŸºæœ¬çš„æˆå‘˜åªæœ‰ä¸¤ä¸ª â€”â€” å­—æ®µä¸æ–¹æ³•ï¼ˆæˆå‘˜å˜é‡ä¸æˆå‘˜æ–¹æ³•ï¼‰ï¼Œæœ¬è´¨è¿˜æ˜¯æ•°æ® + ç®—æ³•
  - æ–¹æ³•è¡¨ç¤ºç±»ï¼ˆæˆ–ç»“æ„ä½“ï¼‰â€œèƒ½åšä»€ä¹ˆäº‹æƒ…â€

- ä¸ºä»€ä¹ˆéœ€è¦æ–¹æ³•å’Œå‡½æ•°

  - éšè—å¤æ‚çš„é€»è¾‘
  - æŠŠå¤§ç®—æ³•åˆ†è§£æˆå°ç®—æ³•
  - å¤ç”¨ï¼ˆreuseï¼Œé‡ç”¨ï¼‰

> :warning: æ³¨ï¼šC# namespace é‡Œä¸èƒ½æœ‰æ–¹æ³•

å½“ä¸€ä¸ªå‡½æ•°ä»¥ç±»çš„æˆå‘˜çš„èº«ä»½å‡ºç°æ—¶ï¼Œå®ƒå°±è¢«ç§°ä¸ºæ–¹æ³•ï¼Œæ–¹æ³•æœ‰ä¸€ä¸ªåˆ«åå«â€œæˆå‘˜å‡½æ•°â€

+++success æ¼”ç¤ºï¼šc++ ä¸­æ·»åŠ ç±»

`Student.h æ–‡ä»¶`

```c++
#pragma once
class Student
{
public:
  Student();
  ~Student();
  void SayHello();
};
```

`Student.cpp æ–‡ä»¶`

```cpp
#include "Student.h"
#include <iostream>

Student::Student()
{
}

Student::~Student()
{
}

void Student::SayHello()
{
  std::cout << "Hello! I'm a student!";
}
```

`Source.cpp æ–‡ä»¶`

```cpp
#include <iostream> // æ ‡å‡†åº“ç”¨<>
#include "Student.h" // è‡ªå·±å®šä¹‰çš„å¤´æ–‡ä»¶ç”¨""

int main()
{
  Student *pStu = new Student();
  pStu->SayHello();
  return 0;
}
```

+++

## å£°æ˜

**è¯­æ³•è¯¦è§£ï¼š**

- å‚è€ƒ C# è¯­è¨€æ–‡æ¡£ï¼ˆå£°æ˜/å®šä¹‰ä¸åˆ†å®¶ï¼‰
- Parameter å…¨ç§°ä¸ºâ€œformal parameterâ€
- å½¢å¼ä¸Šçš„å‚æ•°ï¼Œç®€ç§°â€œå½¢å‚â€

**å‘½åè§„èŒƒï¼š**

- å¤§å°å†™è§„èŒƒï¼šå•è¯é¦–å­—æ¯éƒ½å¤§å†™
- éœ€è¦ä»¥åŠ¨è¯æˆ–è€…åŠ¨è¯çŸ­è¯­ä½œä¸ºåå­—

## è°ƒç”¨

- Argument ä¸­æ–‡ C# æ–‡æ¡£çš„å®˜æ–¹è¯‘æ³•ä¸ºâ€œå®é™…å‚æ•°â€ï¼Œç®€ç§°â€œå®å‚â€
  - å¯ç†è§£ä¸ºè°ƒç”¨æ–¹æ³•æ—¶çš„çœŸå®æ¡ä»¶
- è°ƒç”¨æ–¹æ³•æ—¶çš„ argument åˆ—è¡¨è¦ä¸å®šä¹‰æ–¹æ³•æ—¶çš„ parameter åˆ—è¡¨ç›¸åŒ¹é…

  - C# æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œargument æ˜¯å€¼ï¼Œparameter æ˜¯å˜é‡ï¼Œå€¼ä¸å˜é‡ä¸€å®šè¦åŒ¹é…ï¼Œä¸ç„¶ç¼–è¯‘å™¨ä¼šæŠ¥é”™

## æ„é€ å™¨

æ„é€ å™¨ï¼ˆconstructorï¼‰æ˜¯ç±»å‹çš„æˆå‘˜ä¹‹ä¸€

ç‹­ä¹‰çš„æ„é€ å™¨æŒ‡çš„æ˜¯â€œå®ä¾‹æ„é€ å™¨â€ï¼ˆinstance constructorï¼‰

```csharp
namespace ConstructorExample
{
  class Program
  {
    static void Main(string[] args)
    {
      Student stu = new Student();
      Console.WriteLine(stu.ID);

    }
  }
  class Student
  {
    // æ— å‚æ•°æ„é€ å™¨
    public Student()
    {
      this.ID = 1;
      this.name = "";
    }
    // æœ‰å‚æ•°æ„é€ å™¨
    public Student(int InitId, string InitName)
    {
      this.ID = InitId;
      this.name = InitName;
    }
    public int ID;
    public string name;
  }
}
```

ğŸš© å¿«æ·æ–¹å¼ï¼šctor + ä¸¤æ¬¡ tab

**æ„é€ å™¨çš„å†…å­˜åŸç†**

1ã€é»˜è®¤æ„é€ å™¨

```csharp
Student stu = new Student();
```

![é»˜è®¤æ„é€ å™¨å†…å­˜åŸç†](https://daiblog.oss-cn-chengdu.aliyuncs.com/csharp/é»˜è®¤æ„é€ å™¨å†…å­˜åŸç†.png)

2ã€å¸¦å‚æ•°æ„é€ å™¨å†…å­˜åŸç†

```csharp
Student stu = new Student(1, "Mr.Okay");
```

![å¸¦å‚æ•°æ„é€ å™¨å†…å­˜åŸç†](https://daiblog.oss-cn-chengdu.aliyuncs.com/csharp/å¸¦å‚æ•°æ„é€ å™¨å†…å­˜åŸç†.png)

## æ–¹æ³•çš„é‡è½½ Overload

- æ–¹æ³•ç­¾åï¼ˆmethod signatureï¼‰ç”±æ–¹æ³•çš„åç§°ã€ç±»å‹å½¢å‚çš„ä¸ªæ•°å’Œå®ƒçš„æ¯ä¸€ä¸ªå½¢å‚ï¼ˆæŒ‰ä»å·¦åˆ°å³çš„é¡ºåºï¼‰çš„ç±»å‹å’Œç§ç±»ï¼ˆå€¼ã€å¼•ç”¨æˆ–è¾“å‡ºï¼‰ç»„æˆã€‚<font color="red">æ–¹æ³•ç­¾åä¸åŒ…å«è¿”å›ç±»å‹</font>
- å®ä¾‹æ„é€ å‡½æ•°ç­¾åç”±å®ƒçš„æ¯ä¸€ä¸ªå½¢å‚ï¼ˆæŒ‰ä»å·¦åˆ°å³çš„é¡ºåºï¼‰çš„ç±»å‹å’Œç§ç±»ï¼ˆå€¼ã€å¼•ç”¨æˆ–è¾“å‡ºï¼‰ç»„æˆ
- é‡è½½å†³ç­–ï¼ˆåˆ°åº•è°ƒç”¨å“ªä¸€ä¸ªé‡è½½ï¼‰ï¼šç”¨äºåœ¨ç»™å®šäº†å‚æ•°åˆ—è¡¨å’Œä¸€ç»„å€™é€‰å‡½æ•°æˆå‘˜çš„æƒ…å†µä¸‹ï¼Œé€‰æ‹©ä¸€ä¸ªæœ€ä½³çš„å‡½æ•°æˆå‘˜æ¥å®æ–½è°ƒç”¨

+++success æ¼”ç¤º

```csharp
public int Add(int a, int b)
{
  return a + b;
}

public double Add(double a, double b)
{
  return a + b;
}

// ç±»å‹å½¢å‚
public int Add<T>(int a, int b)
{
  T t;//...
  return a + b;
}
// å‚æ•°ç§ç±»
public int Add(ref int a, int b) // å¼•ç”¨
{
  return a + b;
}

public int Add(int a,out int b) // è¾“å‡º
{
  b = 100;
  return a + b;
}
```

+++

## å¯¹æ–¹æ³•è¿›è¡Œ debug

- è®¾ç½®æ–­ç‚¹ï¼ˆbreakpointï¼‰
- è§‚å¯Ÿæ–¹æ³•è°ƒç”¨æ—¶çš„ call stack
- Step-inï¼ˆF11ï¼‰ã€Step-overï¼ˆF10ï¼‰ã€Step-outï¼ˆShift + F11ï¼‰
- è§‚å¯Ÿå±€éƒ¨å˜é‡çš„å€¼ä¸å˜åŒ–

### call stack

![img](https://daiblog.oss-cn-chengdu.aliyuncs.com/csharp/1541987450419-6d1fa8c2-bb6e-4e7f-9066-a070ca5a0082.png)

### Step-out

Shift + F11ï¼šç”¨äºè·³å‡ºå½“å‰æ–¹æ³•å¹¶è¿”å›åˆ°è°ƒç”¨å®ƒçš„æ–¹æ³•

### Locals

![img](https://daiblog.oss-cn-chengdu.aliyuncs.com/csharp/1541987485561-2410a6e1-6846-42c2-b2c9-6d2dbe37e021.png)

## [æ–¹æ³•çš„è°ƒç”¨ä¸æ ˆ](https://www.yuque.com/yuejiangliu/dotnet/timothy-csharp-008-009#20c5a948)

æ–¹æ³•è°ƒç”¨æ—¶æ ˆå†…å­˜çš„åˆ†é…

- å¯¹ stack frame çš„åˆ†æ
